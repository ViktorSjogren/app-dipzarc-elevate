@{
    ViewData["Title"] = "System Alerts";
    Layout = "_Layout";
}

<div class="page-wrapper-fixed">
    @await Html.PartialAsync("_CustomerSwitcher")
    <!-- Content Section with Blade Layout (Full Height) -->
    <div class="page-content-section" style="padding-top: 56px; height: calc(100vh - 56px);">
        <div class="layout-with-blade" style="height: 100%;">
            <!-- Left Blade (25%) -->
            <div class="layout-blade" style="height: 100%;">
                <div class="blade-container" style="background: linear-gradient(180deg, rgba(32, 59, 70, 0.98) 0%, rgba(32, 59, 70, 0.92) 100%); border-right: 3px solid var(--color-primary-dark); box-shadow: 2px 0 10px rgba(0,0,0,0.3); height: 100%; display: flex; flex-direction: column; overflow: hidden;">
                    <!-- Title Header -->
                    <div class="blade-header" style="padding: 1.5rem 1rem; margin-bottom: 0.75rem; border-bottom: 2px solid var(--color-primary-dark); background: rgba(0,0,0,0.3); flex-shrink: 0;">
                        <h3 class="mb-1 text-primary-light">
                            <i class="fas fa-bell me-2" style="color: var(--color-warning);"></i>
                            System Alerts
                        </h3>
                        <h6 class="mb-0 text-primary-light opacity-70">
                            <i class="fas fa-filter me-2"></i>
                            Filters & Search
                        </h6>
                    </div>

                    <!-- Scrollable Content Area -->
                    <div style="flex: 1; overflow-y: auto; padding-bottom: 2rem;">
                        <!-- Action Buttons -->
                        <div class="blade-section" style="padding: 0.75rem 1rem; margin-bottom: 0.75rem;">
                            <button class="btn btn-primary btn-sm w-100 mb-2" id="applyFilters" style="font-size: 0.8rem; padding: 0.5rem;">
                                <i class="fas fa-check me-1"></i>Apply Filters
                            </button>
                            <button class="btn btn-primary btn-sm w-100 mb-2" id="clearFilters" style="font-size: 0.8rem; padding: 0.5rem;">
                                <i class="fas fa-times me-1"></i>Clear All
                            </button>
                            <a href="@Url.Action("Index", "Administration")" class="btn btn-outline-secondary btn-sm w-100" style="font-size: 0.8rem; padding: 0.5rem;">
                                <i class="fas fa-arrow-left me-1"></i>Back to Admin
                            </a>
                        </div>

                        <!-- Search Filter -->
                        <div class="blade-section" style="padding: 0.75rem 1rem; margin-bottom: 0.75rem; background: rgba(255,255,255,0.03); border-radius: 8px;">
                            <div class="blade-section-title text-primary-light" style="font-size: 0.75rem; margin-bottom: 0.5rem; opacity: 0.8;">SEARCH</div>
                            <div class="filter-group" style="margin-bottom: 0;">
                                <input type="text" class="form-control form-control-sm" id="searchAlert" placeholder="Search alerts..." style="background: rgba(255,255,255,0.08); border: 1px solid rgba(255,255,255,0.15); color: white;">
                            </div>
                        </div>

                        <!-- Alert Type Filter -->
                        <div class="blade-section" style="padding: 0.75rem 1rem; margin-bottom: 0.75rem; background: rgba(255,255,255,0.03); border-radius: 8px;">
                            <div class="blade-section-title text-primary-light" style="font-size: 0.75rem; margin-bottom: 0.5rem; opacity: 0.8;">ALERT TYPE</div>
                            <div class="filter-group" style="margin-bottom: 0;">
                                <div class="form-check" style="margin-bottom: 0.25rem;">
                                    <input class="form-check-input" type="checkbox" value="security" id="filterSecurity" checked>
                                    <label class="form-check-label text-primary-light" for="filterSecurity" style="font-size: 0.875rem;">
                                        <i class="fas fa-exclamation-triangle me-1 text-warning"></i>Security
                                    </label>
                                </div>
                                <div class="form-check" style="margin-bottom: 0.25rem;">
                                    <input class="form-check-input" type="checkbox" value="permission" id="filterPermission" checked>
                                    <label class="form-check-label text-primary-light" for="filterPermission" style="font-size: 0.875rem;">
                                        <i class="fas fa-clock me-1 text-primary"></i>Permission
                                    </label>
                                </div>
                                <div class="form-check" style="margin-bottom: 0.25rem;">
                                    <input class="form-check-input" type="checkbox" value="server" id="filterServer" checked>
                                    <label class="form-check-label text-primary-light" for="filterServer" style="font-size: 0.875rem;">
                                        <i class="fas fa-server me-1 text-secondary"></i>Server
                                    </label>
                                </div>
                                <div class="form-check" style="margin-bottom: 0;">
                                    <input class="form-check-input" type="checkbox" value="usage" id="filterUsage" checked>
                                    <label class="form-check-label text-primary-light" for="filterUsage" style="font-size: 0.875rem;">
                                        <i class="fas fa-chart-line me-1 text-secondary"></i>Usage
                                    </label>
                                </div>
                            </div>
                        </div>

                        <!-- Severity Filter -->
                        <div class="blade-section" style="padding: 0.75rem 1rem; margin-bottom: 0.75rem; background: rgba(255,255,255,0.03); border-radius: 8px;">
                            <div class="blade-section-title text-primary-light" style="font-size: 0.75rem; margin-bottom: 0.5rem; opacity: 0.8;">SEVERITY</div>
                            <div class="filter-group" style="margin-bottom: 0;">
                                <div class="form-check" style="margin-bottom: 0.25rem;">
                                    <input class="form-check-input" type="checkbox" value="critical" id="filterCritical" checked>
                                    <label class="form-check-label text-primary-light" for="filterCritical" style="font-size: 0.875rem;">
                                        <i class="fas fa-times-circle me-1 text-danger"></i>Critical
                                    </label>
                                </div>
                                <div class="form-check" style="margin-bottom: 0.25rem;">
                                    <input class="form-check-input" type="checkbox" value="warning" id="filterWarning" checked>
                                    <label class="form-check-label text-primary-light" for="filterWarning" style="font-size: 0.875rem;">
                                        <i class="fas fa-exclamation-circle me-1 text-warning"></i>Warning
                                    </label>
                                </div>
                                <div class="form-check" style="margin-bottom: 0;">
                                    <input class="form-check-input" type="checkbox" value="info" id="filterInfo" checked>
                                    <label class="form-check-label text-primary-light" for="filterInfo" style="font-size: 0.875rem;">
                                        <i class="fas fa-info-circle me-1 text-primary"></i>Info
                                    </label>
                                </div>
                            </div>
                        </div>

                        <!-- Summary Stats -->
                        <div class="blade-section" style="padding: 0.75rem 1rem; margin-bottom: 0.75rem; background: rgba(255,255,255,0.05); border: 1px solid rgba(255,255,255,0.1); border-radius: 8px;">
                            <div class="blade-section-title text-primary-light mb-2" style="font-size: 0.75rem; opacity: 0.8;">SUMMARY</div>
                            <div class="text-primary-light" style="font-size: 0.875rem;">
                                <div class="d-flex justify-content-between mb-1">
                                    <span style="opacity: 0.8;">Total Alerts:</span>
                                    <span class="fw-bold">4</span>
                                </div>
                                <div class="d-flex justify-content-between mb-1">
                                    <span style="opacity: 0.8;">Active:</span>
                                    <span class="fw-bold text-warning">0</span>
                                </div>
                                <div class="d-flex justify-content-between">
                                    <span style="opacity: 0.8;">Status:</span>
                                    <span class="fw-bold text-secondary">Inactive</span>
                                </div>
                            </div>
                        </div>

                        <!-- Feature Status -->
                        <div class="blade-section" style="padding: 0.75rem 1rem; background: rgba(255,194,14,0.1); border: 1px solid rgba(255,194,14,0.2); border-radius: 8px;">
                            <div class="text-primary-light" style="font-size: 0.75rem; opacity: 0.8;">
                                <i class="fas fa-info-circle me-1 text-warning"></i>
                                Alert system coming soon
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Right Main Content (75%) -->
            <div class="layout-main" style="padding: 0; display: flex; flex-direction: column; height: 100%;">
                <div style="overflow-y: auto; flex: 1; height: 100%; padding: 0;">
                    <table class="table table-striped table-hover mb-0" style="margin: 0;">
                        <thead class="table-header-gradient position-sticky" style="top: 0; z-index: 10; background: linear-gradient(135deg, var(--color-primary-dark) 0%, var(--color-secondary-dark) 100%);">
                            <tr>
                                <th style="padding: 0.5rem;">Type</th>
                                <th style="padding: 0.5rem;">Severity</th>
                                <th style="padding: 0.5rem;">Message</th>
                                <th style="padding: 0.5rem;">Timestamp</th>
                                <th style="padding: 0.5rem;">Status</th>
                                <th style="padding: 0.5rem;">Actions</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr class="alert-row" data-type="security" data-severity="warning" data-message="monitor failed unlock attempts">
                                <td style="padding: 0.4rem 0.5rem;">
                                    <i class="fas fa-exclamation-triangle me-1 icon-warning" style="font-size: 0.8rem;"></i>
                                    <strong style="font-size: 0.875rem;">Security Alert</strong>
                                </td>
                                <td style="padding: 0.4rem 0.5rem;">
                                    <span class="badge bg-warning text-dark" style="font-size: 0.75rem; padding: 0.25rem 0.5rem;">
                                        <i class="fas fa-exclamation-circle me-1"></i>Medium
                                    </span>
                                </td>
                                <td style="padding: 0.4rem 0.5rem;">
                                    <small style="font-size: 0.8rem;">Monitor failed unlock attempts, suspicious activity, and security-related events</small>
                                </td>
                                <td style="padding: 0.4rem 0.5rem;">
                                    <small class="text-muted" style="font-size: 0.8rem;">Coming Soon</small>
                                </td>
                                <td style="padding: 0.4rem 0.5rem;">
                                    <span class="badge bg-secondary" style="font-size: 0.75rem; padding: 0.25rem 0.5rem;">Inactive</span>
                                </td>
                                <td style="padding: 0.4rem 0.5rem;">
                                    <button class="btn btn-sm btn-outline-primary" disabled style="padding: 0.25rem 0.5rem; font-size: 0.75rem;">
                                        <i class="fas fa-eye"></i>
                                    </button>
                                </td>
                            </tr>
                            <tr class="alert-row" data-type="permission" data-severity="info" data-message="permissions about to expire">
                                <td style="padding: 0.4rem 0.5rem;">
                                    <i class="fas fa-clock me-1 icon-primary" style="font-size: 0.8rem;"></i>
                                    <strong style="font-size: 0.875rem;">Permission Expiry</strong>
                                </td>
                                <td style="padding: 0.4rem 0.5rem;">
                                    <span class="badge bg-primary" style="font-size: 0.75rem; padding: 0.25rem 0.5rem;">
                                        <i class="fas fa-info-circle me-1"></i>Info
                                    </span>
                                </td>
                                <td style="padding: 0.4rem 0.5rem;">
                                    <small style="font-size: 0.8rem;">Notifications about permissions that are about to expire or have expired</small>
                                </td>
                                <td style="padding: 0.4rem 0.5rem;">
                                    <small class="text-muted" style="font-size: 0.8rem;">Coming Soon</small>
                                </td>
                                <td style="padding: 0.4rem 0.5rem;">
                                    <span class="badge bg-secondary" style="font-size: 0.75rem; padding: 0.25rem 0.5rem;">Inactive</span>
                                </td>
                                <td style="padding: 0.4rem 0.5rem;">
                                    <button class="btn btn-sm btn-outline-primary" disabled style="padding: 0.25rem 0.5rem; font-size: 0.75rem;">
                                        <i class="fas fa-eye"></i>
                                    </button>
                                </td>
                            </tr>
                            <tr class="alert-row" data-type="server" data-severity="critical" data-message="server connectivity health checks">
                                <td style="padding: 0.4rem 0.5rem;">
                                    <i class="fas fa-server me-1 icon-secondary" style="font-size: 0.8rem;"></i>
                                    <strong style="font-size: 0.875rem;">Server Health</strong>
                                </td>
                                <td style="padding: 0.4rem 0.5rem;">
                                    <span class="badge bg-danger" style="font-size: 0.75rem; padding: 0.25rem 0.5rem;">
                                        <i class="fas fa-times-circle me-1"></i>Critical
                                    </span>
                                </td>
                                <td style="padding: 0.4rem 0.5rem;">
                                    <small style="font-size: 0.8rem;">Alerts about server connectivity, health checks, and onboarding status</small>
                                </td>
                                <td style="padding: 0.4rem 0.5rem;">
                                    <small class="text-muted" style="font-size: 0.8rem;">Coming Soon</small>
                                </td>
                                <td style="padding: 0.4rem 0.5rem;">
                                    <span class="badge bg-secondary" style="font-size: 0.75rem; padding: 0.25rem 0.5rem;">Inactive</span>
                                </td>
                                <td style="padding: 0.4rem 0.5rem;">
                                    <button class="btn btn-sm btn-outline-primary" disabled style="padding: 0.25rem 0.5rem; font-size: 0.75rem;">
                                        <i class="fas fa-eye"></i>
                                    </button>
                                </td>
                            </tr>
                            <tr class="alert-row" data-type="usage" data-severity="info" data-message="usage patterns peak times">
                                <td style="padding: 0.4rem 0.5rem;">
                                    <i class="fas fa-chart-line me-1 icon-secondary" style="font-size: 0.8rem;"></i>
                                    <strong style="font-size: 0.875rem;">Usage Statistics</strong>
                                </td>
                                <td style="padding: 0.4rem 0.5rem;">
                                    <span class="badge bg-primary" style="font-size: 0.75rem; padding: 0.25rem 0.5rem;">
                                        <i class="fas fa-info-circle me-1"></i>Info
                                    </span>
                                </td>
                                <td style="padding: 0.4rem 0.5rem;">
                                    <small style="font-size: 0.8rem;">Track usage patterns, peak times, and system utilization metrics</small>
                                </td>
                                <td style="padding: 0.4rem 0.5rem;">
                                    <small class="text-muted" style="font-size: 0.8rem;">Coming Soon</small>
                                </td>
                                <td style="padding: 0.4rem 0.5rem;">
                                    <span class="badge bg-secondary" style="font-size: 0.75rem; padding: 0.25rem 0.5rem;">Inactive</span>
                                </td>
                                <td style="padding: 0.4rem 0.5rem;">
                                    <button class="btn btn-sm btn-outline-primary" disabled style="padding: 0.25rem 0.5rem; font-size: 0.75rem;">
                                        <i class="fas fa-eye"></i>
                                    </button>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>
</div>

<script>
    // Filter functionality
    document.addEventListener('DOMContentLoaded', function() {
        const searchAlert = document.getElementById('searchAlert');
        const filterSecurity = document.getElementById('filterSecurity');
        const filterPermission = document.getElementById('filterPermission');
        const filterServer = document.getElementById('filterServer');
        const filterUsage = document.getElementById('filterUsage');
        const filterCritical = document.getElementById('filterCritical');
        const filterWarning = document.getElementById('filterWarning');
        const filterInfo = document.getElementById('filterInfo');
        const applyBtn = document.getElementById('applyFilters');
        const clearBtn = document.getElementById('clearFilters');

        function applyFilters() {
            const rows = document.querySelectorAll('.alert-row');
            const alertSearch = searchAlert.value.toLowerCase();
            const showSecurity = filterSecurity.checked;
            const showPermission = filterPermission.checked;
            const showServer = filterServer.checked;
            const showUsage = filterUsage.checked;
            const showCritical = filterCritical.checked;
            const showWarning = filterWarning.checked;
            const showInfo = filterInfo.checked;

            rows.forEach(row => {
                let show = true;

                const rowMessage = row.dataset.message;
                if (alertSearch && !rowMessage.includes(alertSearch)) {
                    show = false;
                }

                const rowType = row.dataset.type;
                if (rowType === 'security' && !showSecurity) show = false;
                if (rowType === 'permission' && !showPermission) show = false;
                if (rowType === 'server' && !showServer) show = false;
                if (rowType === 'usage' && !showUsage) show = false;

                const rowSeverity = row.dataset.severity;
                if (rowSeverity === 'critical' && !showCritical) show = false;
                if (rowSeverity === 'warning' && !showWarning) show = false;
                if (rowSeverity === 'info' && !showInfo) show = false;

                row.style.display = show ? '' : 'none';
            });
        }

        function clearFilters() {
            searchAlert.value = '';
            filterSecurity.checked = true;
            filterPermission.checked = true;
            filterServer.checked = true;
            filterUsage.checked = true;
            filterCritical.checked = true;
            filterWarning.checked = true;
            filterInfo.checked = true;
            applyFilters();
        }

        applyBtn.addEventListener('click', applyFilters);
        clearBtn.addEventListener('click', clearFilters);

        searchAlert.addEventListener('input', applyFilters);
        filterSecurity.addEventListener('change', applyFilters);
        filterPermission.addEventListener('change', applyFilters);
        filterServer.addEventListener('change', applyFilters);
        filterUsage.addEventListener('change', applyFilters);
        filterCritical.addEventListener('change', applyFilters);
        filterWarning.addEventListener('change', applyFilters);
        filterInfo.addEventListener('change', applyFilters);
    });
</script>
