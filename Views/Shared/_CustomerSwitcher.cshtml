@if (ViewBag.IsGlobalAdmin == true)
{
    var customers = ViewBag.Customers as IEnumerable<dizparc_elevate.Models.securitySolutionsCommon.Customer>;
    var currentCustomerId = (int?)ViewBag.CurrentCustomerId;
    var currentCustomerName = customers?.FirstOrDefault(c => c.CustomerId == currentCustomerId)?.CustomerName ?? "Select Customer";
    <li class="nav-item dropdown me-3">
        <a class="nav-link dropdown-toggle" href="#" id="customerDropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false" style="color: var(--color-success) !important;">
            <i class="fas fa-building me-1"></i>
            @currentCustomerName
        </a>
        <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="customerDropdown" style="background: var(--color-secondary-dark); border: 1px solid rgba(113, 191, 68, 0.3);">
            @if (customers != null)
            {
                @foreach (var customer in customers)
                {
                    <li>
                        <form method="post" action="@Url.Action("SwitchCustomer", "Administration")" class="d-inline w-100">
                            @Html.AntiForgeryToken()
                            <button type="submit" name="customerId" value="@customer.CustomerId"
                                    class="dropdown-item @(customer.CustomerId == currentCustomerId ? "active" : "")"
                                    style="color: #f8f9fa; @(customer.CustomerId == currentCustomerId ? "background: var(--color-primary-dark);" : "")">
                                <i class="fas fa-building me-2" style="opacity: 0.6;"></i>@customer.CustomerName
                            </button>
                        </form>
                    </li>
                }
            }
        </ul>
    </li>
}
